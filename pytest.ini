# Pytest configuration for CMF tests

[tool:pytest]
# Test discovery patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Directories to search for tests
testpaths = test/unit test/integration test/e2e

# Console output options
addopts = 
    -v                          # Verbose output
    --tb=short                  # Shorter traceback format
    --strict-markers            # Raise error on unknown markers
    --disable-warnings          # Disable warnings in output
    -p no:cacheprovider         # Disable pytest cache

# Markers for organizing tests
markers =
    unit: Unit tests (fast, isolated, mocked dependencies)
    integration: Integration tests (slower, some real dependencies)
    e2e: End-to-end tests (slowest, full system tests)
    slow: Tests that take a long time to run
    network: Tests that require network access
    metadata: Tests related to metadata commands
    artifact: Tests related to artifact commands
    parser: Tests related to CLI parser
    init: Tests related to init commands
    repo: Tests related to repo commands

# Coverage options (when using pytest-cov)
# Run with: pytest --cov=cmflib --cov-report=html

# Ignore warnings from dependencies
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# Minimum Python version
minversion = 3.8

# Test timeout (if pytest-timeout is installed)
# timeout = 300

# Directory patterns to ignore
norecursedirs = .git .tox dist build *.egg .venv venv

# Enable doctests (optional)
# addopts = --doctest-modules
